<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Interactive World Map (Detailed Countries)</title>
  <style>
    body { font-family: system-ui, sans-serif; margin: 0; padding: 20px; background: #fff; color: #111; }
    h1 { font-size: 18px; margin-bottom: 12px; }
    .map-wrap { max-width: 1100px; margin: 0 auto; }
    svg { width: 100%; height: auto; display: block; }
    path { fill: #000; stroke: #222; stroke-width: 0.3; cursor: pointer; transition: fill 0.2s ease; }
    .legend { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px; }
    .legend .item { display: flex; align-items: center; gap: 6px; font-size: 13px; }
    .swatch { width: 14px; height: 12px; border-radius: 2px; border: 1px solid #ddd; }
    .note { margin-top: 10px; font-size: 13px; color: #555; }
  </style>
</head>
<body>
  <div class="map-wrap">
    <h1>Interactive World Map — Click to Toggle Highlighted Countries</h1><!-- Full detailed world map (Natural Earth SVG) -->
<div id="svg-container" aria-hidden="false">Loading map…</div>

<script>
  // URL of a detailed world SVG where each country path is assigned an ISO alpha-2 id (US, JP, IT, FR, GB, DE, CA, CN, MX, etc.)
  // If this URL fails for you, replace it with a different world SVG that has ISO ids.
  const SVG_URL = 'https://raw.githubusercontent.com/raphaellepuschitz/SVG-World-Map/master/world.svg';

  async function loadAndInitSVG(){
    const container = document.getElementById('svg-container');
    try{
      const res = await fetch(SVG_URL);
      if(!res.ok) throw new Error('SVG fetch failed: '+res.status);
      const svgText = await res.text();
      container.innerHTML = svgText;

      // ensure SVG scales nicely
      const svg = container.querySelector('svg');
      if(svg){
        svg.setAttribute('width','100%');
        svg.setAttribute('height','auto');
        svg.style.display = 'block';
      }

      // list of target countries (ISO alpha-2 codes used in the SVG)
      const targets = { US: '#3C78D8', JP: '#D80027', IT: '#009246', FR: '#0055A4', GB: '#CF142B', DE: '#FFCC00', CA: '#FF0000', CN: '#DE2910', MX: '#006847' };

      // make all countries silhouette black by default
      const allPaths = container.querySelectorAll('path, g');
      allPaths.forEach(el => {
        // paths inside grouped countries might be <g> with child paths — normalize to set fills on child shapes
        if(el.tagName.toLowerCase() === 'g'){
          el.querySelectorAll('path').forEach(p=> p.setAttribute('fill','#000'));
        } else {
          // ensure path has a fill
          if(!el.getAttribute('fill')) el.setAttribute('fill','#000');
        }
      });

      // attach interactive behavior only to our targets
      Object.keys(targets).forEach(code => {
        // many SVGs use different ID formats (e.g. "US", "us", "country-US", "ISO_USA").
        // We'll try a few common variants to find the element.
        const variants = [code, code.toUpperCase(), code.toLowerCase(), 'country-'+code, 'Country-'+code, 'ID_'+code, 'id-'+code, 'iso-'+code];
        let el = null;
        for(const v of variants){
          el = container.querySelector('#'+CSS.escape(v));
          if(el) break;
        }

        if(!el){
          // try to find element by data attribute or by title element text matching
          const byData = container.querySelector('[data-id="'+code+'"], [data-name="'+code+'"]');
          if(byData) el = byData;
        }

        if(!el){
          // fallback: some SVGs label countries by their full name in lowercase id (e.g. "united-states")
          const nameMap = { US: ['united-states','united_states','usa','u-s-a'], JP:['japan'], IT:['italy'], FR:['france'], GB:['united-kingdom','uk','great-britain'], DE:['germany'], CA:['canada'], CN:['china'], MX:['mexico'] };
          const candidates = nameMap[code]||[];
          for(const cand of candidates){
            const found = container.querySelector('#'+CSS.escape(cand)) || container.querySelector('[id*="'+cand+'"]');
            if(found){ el = found; break; }
          }
        }

        if(!el) return; // couldn't find that country in this SVG

        // assign interactive class for hover styling (only these will highlight on hover)
        el.classList.add('interactive-country');
        // store original fill for reset
        el.dataset.originalFill = (el.getAttribute('fill') || '#000');
        el.dataset.toggled = 'false';

        // click toggles color
        el.addEventListener('click', e => {
          e.stopPropagation();
          const isOn = el.dataset.toggled === 'true';
          const color = targets[code];
          if(el.tagName.toLowerCase() === 'g'){
            el.querySelectorAll('path').forEach(p=> p.setAttribute('fill', isOn ? p.dataset.originalFill || '#000' : color));
          } else {
            el.setAttribute('fill', isOn ? (el.dataset.originalFill || '#000') : color);
          }
          el.dataset.toggled = isOn ? 'false' : 'true';
        });

        // keyboard accessibility
        if(el.tabIndex === -1) el.tabIndex = 0;
        el.addEventListener('keydown', ev => { if(ev.key === 'Enter' || ev.key === ' ') { ev.preventDefault(); el.click(); } });
      });

      // add CSS for hover highlight for only interactive countries
      const style = document.createElement('style');
      style.textContent = `
        .interactive-country:hover path, .interactive-country:hover { filter: brightness(1.25); }
        .interactive-country { transition: filter .12s ease, fill .12s ease; }
      `;
      document.head.appendChild(style);

    } catch(err){
      container.innerHTML = '<p style="color:#900">Failed to load SVG map. You can either host a world SVG and set SVG_URL at the top of this file, or paste an inline SVG directly into the page. Error: '+ (err.message || err) +'</p>';
      console.error(err);
    }
  }

  loadAndInitSVG();
</script>

<div class="legend">
  <div class="item"><div class="swatch" style="background:#3C78D8"></div>USA</div>
  <div class="item"><div class="swatch" style="background:#D80027"></div>Japan</div>
  <div class="item"><div class="swatch" style="background:#009246"></div>Italy</div>
  <div class="item"><div class="swatch" style="background:#0055A4"></div>France</div>
  <div class="item"><div class="swatch" style="background:#CF142B"></div>UK</div>
  <div class="item"><div class="swatch" style="background:#FFCC00"></div>Germany</div>
  <div class="item"><div class="swatch" style="background:#FF0000"></div>Canada</div>
  <div class="item"><div class="swatch" style="background:#DE2910"></div>China</div>
  <div class="item"><div class="swatch" style="background:#006847"></div>Mexico</div>
</div>

<div class="note">Click any of the listed countries to toggle its color. All other countries remain solid black.</div>

  </div>  <script>
    (function(){
      const colors = {
        US: '#3C78D8',
        JP: '#D80027',
        IT: '#009246',
        FR: '#0055A4',
        GB: '#CF142B',
        DE: '#FFCC00',
        CA: '#FF0000',
        CN: '#DE2910',
        MX: '#006847'
      };

      Object.keys(colors).forEach(id => {
        const el = document.getElementById(id);
        if(!el) return;
        el.setAttribute('fill','#000');
        el.dataset.colored = 'false';

        el.addEventListener('click', () => {
          const isOn = el.dataset.colored === 'true';
          el.setAttribute('fill', isOn ? '#000' : colors[id]);
          el.dataset.colored = isOn ? 'false' : 'true';
        });
      });
    })();
  </script></body>
</html>
