<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Fake Hotel Booking</title>
<style>
:root { --accent: orange; --ok: green; }

body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
  background: #f5f5f5;
}

.container {
  max-width: 980px;
  margin: 24px auto;
  padding: 0 16px;
}

.slide {
  display: none;
  padding: 20px;
}

.active {
  display: block;
}

.options {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 15px;
  margin-top: 20px;
}

.option, .sub-option, .people-btn {
  background: white;
  padding: 15px;
  border-radius: 10px;
  cursor: pointer;
  border: 2px solid transparent;
  box-sizing: border-box;
}

.option:hover, .sub-option:hover, .people-btn:hover {
  border-color: var(--accent);
}

.image-placeholder {
  width: 100%;
  height: 120px;
  background: orange;
  border-radius: 8px;
  margin-bottom: 10px;
}

.nav-buttons {
  margin-top: 20px;
  display: flex;
  justify-content: space-between;
}

button {
  padding: 10px 20px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

.back {
  background: #ccc;
}

.next {
  background: var(--accent);
  color: white;
}

.sub-options-box {
  margin-top: 20px;
  padding: 15px;
  background: #fff;
  border-radius: 10px;
  display: none;
}

.summary {
  background: #fff;
  padding: 20px;
  border-radius: 10px;
}

.selected-main, .chosen-sub, .people-btn.selected {
  border-color: var(--ok) !important;
  background-color: #e6ffe6;
}

@media (max-width: 640px) {
  .options {
    grid-template-columns: 1fr;
  }
}
</style>
</head>
<body>
<div class="container">

  <!-- Slide 1: Choose Number of People -->
  <div id="slide1" class="slide active">
    <h2>Step 1: Select Number of People</h2>
    <div class="options">
      <div class="option" data-people="1">1 Person</div>
      <div class="option" data-people="2">2 People</div>
      <div class="option" data-people="3">3 People</div>
      <div class="option" data-people="4">4 People</div>
    </div>
    <div class="nav-buttons">
      <div></div>
      <button class="next" id="next1">Next</button>
    </div>
  </div>

  <!-- Slides 2 to 6 generated dynamically -->
  
  <!-- Final Summary Slide -->
  <div id="final-slide" class="slide">
    <h2>Booking Summary</h2>
    <div class="summary" id="summary-box"></div>
    <div class="nav-buttons">
      <button class="back" id="back-final">Back</button>
      <div></div>
    </div>
  </div>
</div>

<script>
let currentSlide = 1;
const selections = { people: null };

// Price data for slides 2-6
function generatePrices() {
  return [
    [100, 120, 140, 160, 180],
    [90, 110, 130, 150, 170],
    [80, 100, 120, 140, 160],
    [70, 90, 110, 130, 150]
  ];
}

const priceData = {
  slide2: generatePrices(),
  slide3: generatePrices(),
  slide4: generatePrices(),
  slide5: generatePrices(),
  slide6: generatePrices(),
};

// Show a specific slide
function showSlide(n) {
  document.querySelectorAll('.slide').forEach(s => s.classList.remove('active'));
  if (n === 'final') {
    document.getElementById('final-slide').classList.add('active');
    currentSlide = 'final';
    return;
  }
  const slide = document.getElementById('slide' + n);
  if (slide) slide.classList.add('active');
  currentSlide = n;

  // Reapply previously selected main or people options
  if (n === 1) {
    document.querySelectorAll('#slide1 .option').forEach(opt => {
      const v = Number(opt.getAttribute('data-people'));
      opt.classList.toggle('selected-main', selections.people === v);
    });
  } else if (n >= 2 && n <= 6) {
    const saved = selections['slide' + n];
    const mainOpts = document.querySelectorAll('#slide' + n + ' .option');
    mainOpts.forEach(o => o.classList.remove('selected-main'));
    document.querySelectorAll('#slide' + n + ' .sub-options-box').forEach(b => b.style.display = 'none');
    if (saved != null) {
      const list = priceData['slide' + n];
      let parentIndex = -1, subIndex = -1;
      list.forEach((arr, p) => {
        const idx = arr.indexOf(saved);
        if (idx !== -1) { parentIndex = p; subIndex = idx; }
      });
      if (parentIndex !== -1) {
        mainOpts[parentIndex].classList.add('selected-main');
        const box = document.getElementById(`suboptions-${n}-${parentIndex+1}`);
        if (box) box.style.display = 'block';
        const subOpts = box.querySelectorAll('.sub-option');
        subOpts.forEach(s => s.classList.remove('chosen-sub'));
        if (subOpts[subIndex]) subOpts[subIndex].classList.add('chosen-sub');
      }
    }
  }
}

// Next / Back
function nextSlide() {
  if (currentSlide === 'final') return;
  if (currentSlide === 6) { generateSummary(); showSlide('final'); return; }
  showSlide(currentSlide + 1);
}

function prevSlide() {
  if (currentSlide === 'final') { showSlide(6); return; }
  if (currentSlide > 1) showSlide(currentSlide - 1);
}

// People selection
document.querySelectorAll('#slide1 .option').forEach(opt => {
  opt.addEventListener('click', () => {
    selections.people = Number(opt.getAttribute('data-people'));
    document.querySelectorAll('#slide1 .option').forEach(o => o.classList.remove('selected-main'));
    opt.classList.add('selected-main');
  });
});

// Generate slides 2-6 dynamically
function generateSlides() {
  const container = document.querySelector('.container');
  for (let i = 2; i <= 6; i++) {
    const slide = document.createElement('div');
    slide.id = 'slide' + i;
    slide.className = 'slide';

    let html = `<h2>Step ${i}: Choose an Option</h2><div class="options">`;
    const list = priceData['slide' + i];
    for (let opt = 1; opt <= 4; opt++) {
      html += `<div class="option" data-main="${opt}" onclick="showSubOptions(${i}, ${opt})">
                <div class="image-placeholder"></div>
                Option ${opt}
               </div>`;
    }
    html += `</div>`;
    
    for (let opt = 1; opt <= 4; opt++) {
      html += `<div class="sub-options-box" id="suboptions-${i}-${opt}">
                 <h3>Choose a sub option for Option ${opt}</h3>
                 <div class="options">`;
      list[opt-1].forEach((price, idx) => {
        html += `<div class="sub-option" onclick="chooseSub(${i}, ${opt}, ${idx}, this)">
                  <div class="image-placeholder"></div>
                  Sub Option ${idx+1} - $${price}
                 </div>`;
      });
      html += `</div></div>`;
    }

    html += `<div class="nav-buttons">
               <button class="back" onclick="prevSlide()">Back</button>
               <button class="next" onclick="nextSlide()">Next</button>
             </div>`;
    slide.innerHTML = html;
    container.insertBefore(slide, document.getElementById('final-slide'));
  }
}

// Show sub-options
function showSubOptions(slide, parent) {
  document.querySelectorAll(`#slide${slide} .sub-options-box`).forEach(b => b.style.display = 'none');
  const box = document.getElementById(`suboptions-${slide}-${parent}`);
  if (box) box.style.display = 'block';
}

// Choose sub-option
function chooseSub(slide, parent, subIndex, el) {
  const price = priceData['slide' + slide][parent-1][subIndex];
  selections['slide' + slide] = price;

  document.querySelectorAll(`#slide${slide} .sub-option`).forEach(s => s.classList.remove('chosen-sub'));
  el.classList.add('chosen-sub');

  const mains = document.querySelectorAll(`#slide${slide} .option`);
  mains.forEach(m => m.classList.remove('selected-main'));
  if (mains[parent-1]) mains[parent-1].classList.add('selected-main');
}

// Generate summary
function generateSummary() {
  let total = 0;
  for (let i = 2; i <= 6; i++) total += selections['slide' + i] || 0;
  const people = selections.people || 1;
  total *= people;
  document.getElementById('summary-box').innerHTML = `<p><strong>People:</strong> ${people}</p>
                                                     <p><strong>Final Price:</strong> $${total}</p>`;
}

// Initialize
generateSlides();
showSlide(1);
</script>
</body>
</html>
